# TaskMap 思源笔记插件

[English](./README.md)

一个基于 Vue 3 和 Element Plus 的现代化思源笔记任务管理插件。

## ✨ 功能特性

### 📋 项目管理
- 创建和管理不同类型的项目
- 跟踪项目进度和完成率
- 设置项目截止日期和里程碑
- 归档和删除项目

### ✅ 任务管理
- **智能任务分组**: 任务自动按时间分组：
  - 📅 **待安排**: 没有截止日期的任务
  - 🌞 **今日待办**: 今天到期的任务
  - 📆 **未来一周**: 未来7天内到期的任务
  - ✅ **已完成**: 所有已完成的任务
- **层级任务**: 支持子任务和父子关系
- **任务详情**: 丰富的任务编辑功能，支持备注和日期范围
- **拖拽排序**: 重新排序任务和在项目间移动
- **右键菜单**: 快速操作（添加子任务、移动、删除、开始计时）

### ⏱️ 专注计时
- **基于任务的计时**: 选择任何任务开始专注工作
- **计时控制**: 开始、暂停、继续和结束计时会话
- **专注历史**: 跟踪和查看专注会话历史
- **统计分析**: 查看总专注时间和会话次数

### 🎨 现代化界面
- **响应式设计**: 在桌面和移动设备上无缝工作
- **主题支持**: 自动同步思源主题（明亮/暗黑/跟随系统）
- **Element Plus**: 美观一致的UI组件
- **流畅动画**: 现代化的交互反馈

## 🚀 快速开始

### 安装
1. 打开思源笔记
2. 进入 **设置** → **集市**
3. 搜索 "TaskMap"
4. 点击 **安装** 并 **启用**

### 基本使用

#### 创建项目
1. 导航到 **项目** 标签页
2. 在输入栏中输入项目名称
3. 按 **Enter** 创建
4. 点击任何项目卡片打开详细视图

#### 管理任务
1. 切换到 **任务** 标签页
2. 在输入栏中输入任务名称
3. 按 **Enter** 创建
4. 使用任务分组来组织你的工作

#### 使用计时器
1. 进入 **计时** 标签页
2. 从下拉菜单中选择任务
3. 点击 **开始** 开始计时
4. 根据需要使用 **暂停** 和 **继续**
5. 完成后点击 **结束**

## 🛠️ 开发

### 环境要求
- Node.js 16+
- pnpm
- 思源笔记 2.8.0+

### 设置
```bash
# 克隆仓库
git clone https://github.com/LeonZ1998/siyuan-plugin-taskmap.git
cd siyuan-plugin-taskmap

# 安装依赖
pnpm install

# 复制环境文件
cp .env.example .env

# 编辑 .env 文件并设置你的思源工作空间路径
# VITE_SIYUAN_WORKSPACE_PATH=D:/YourSiyuanWorkspace

# 开始开发
pnpm dev
```

### 构建
```bash
# 构建生产版本
pnpm build

# 这将生成用于分发的 package.zip
```

## 🏗️ 架构

### 技术栈
- **前端**: Vue 3 (Composition API) + TypeScript
- **UI框架**: Element Plus
- **构建工具**: Vite
- **数据存储**: IndexedDB
- **状态管理**: Vue 3 响应式系统
- **事件系统**: 自定义事件总线

### 项目结构
```
src/
├── components/          # Vue 组件
│   ├── TaskCard.vue    # 任务显示组件
│   ├── TaskPage.vue    # 任务管理页面
│   ├── ProjectPage.vue # 项目显示组件
│   └── TimerPage.vue   # 计时器界面
├── utils/              # 工具函数
│   ├── dbManager.ts    # 数据库操作
│   └── eventBus.ts     # 事件通信
├── types/              # TypeScript 类型定义
├── composables/        # Vue 组合式函数
└── App.vue            # 主应用组件
```

## 📊 数据存储

TaskMap 使用 IndexedDB 进行本地数据存储：
- **项目**: 项目信息和元数据
- **任务**: 任务详情、关系和状态
- **计时记录**: 专注会话历史和统计

所有数据都存储在浏览器本地，确保隐私和离线功能。

## 🎯 核心功能详解

### 智能任务分组
任务根据截止日期自动分类：
- **待安排**: 适合没有具体截止日期的任务
- **今日待办**: 专注于当务之急
- **未来一周**: 为即将到来的工作做计划
- **已完成**: 跟踪你的进度和成就

### 主题集成
TaskMap 无缝集成思源的主题系统：
- 自动检测并同步思源主题
- 支持明亮、暗黑和跟随系统主题模式
- 所有UI组件实时适应主题变化

### 右键菜单操作
右键点击任何任务进行快速操作：
- **添加子任务**: 创建子任务
- **移动到项目**: 在项目间转移任务
- **开始计时**: 开始专注会话
- **删除**: 删除任务（带确认）

## 🤝 贡献

我们欢迎贡献！请随时：
- 报告错误
- 建议新功能
- 提交拉取请求
- 改进文档

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🔗 链接

- **仓库**: https://github.com/LeonZ1998/siyuan-plugin-taskmap
- **思源笔记**: https://github.com/siyuan-note/siyuan
- **Element Plus**: https://element-plus.org/

---

为思源社区而制作 ❤️
